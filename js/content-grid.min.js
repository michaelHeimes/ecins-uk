"use strict";jQuery((function(t){if(t(".content-grid--filters-toggle button").on("click",(function(){t(this).toggleClass("is-active"),t(".content-grid--filters").slideToggle()})),t(".filter-box input").prop("checked",!1),t(".content-grid").length){var e={};t("body").hasClass("page-partners")&&(e.type="partners"),t("body").hasClass("post-type-archive-resource")&&(e.type="resources"),t("body").hasClass("page-press")&&(e.type="press");var s=new function(){this.state={type:"content",tax_queries:[],init:!1,paused:!1},this.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=Object.assign(this.state,t),this.watchForChanges(),this.checkHashAndClick(),this.navClickHashAndClick()},this.checkHashAndClick=function(){if(window.location.hash){var e=window.location.hash.substr(1),s=document.getElementById("resource-grid");console.log(t(s).offset().top),t(".filter-box").each((function(){t(this).find("input").each((function(){t(this).data("type")===e&&(window.location.href=window.location.href.split("#")[0]+"#"+e,t(this).click())}))}))}},this.navClickHashAndClick=function(){t("#site-navigation a").each((function(){t(this).on("click",(function(){var e=this.hash.substr(1),s=t('.filter-box input[data-type="'+e+'"]');if(s.length>0){s.prop("checked",!0).trigger("change");var i=document.getElementById("resource-grid");i&&t("html, body").animate({scrollTop:t(i).offset().top},750)}}))}))},this.watchForChanges=function(){var e=this;e.state.tax_queries=[],t(".filter-box").each((function(){t(".filter-box input").on("change",(function(){e.state.paused||e.getPosts()}))}))},this.updateCheckboxes=function(){var e=this;e.state.tax_queries=[],t(".filter-box").each((function(){t(this).find("input").each((function(){var s=t(this).is(":checked"),i=t(this).parents(".filter-box").attr("data-filter"),a=t(this).val();s&&e.state.tax_queries.push({taxonomy:i,term_id:a})}))}))},this.getPosts=function(){this.updateCheckboxes();var e=this,s=localized.siteUrl+"/wp-json/ecins/v2/"+this.state.type,i={tax_queries:this.state.tax_queries};t(".content-grid--results").addClass("is-loading"),e.state.paused=!0,t.get(s,i).done((function(t){t=JSON.parse(t),e.state.totalPosts=t.meta.total,e.state.totalPages=t.meta.pages,e.displayPosts(t.data)}))},this.displayPosts=function(e){var s="";Object.keys(e).forEach((function(t){var i='<div class="results"><div class="results--title">'+e[t].title+"</div>";Object.keys(e[t]).forEach((function(s){"title"!==s&&(i+=(e[t][s].link?'<a href="'+e[t][s].link+'"'+(e[t][s].target?' target="'+e[t][s].target+'"':"")+' class="content-card">':'<span class="content-card">')+'<div class="content-card--box"><div class="content-card--image"><img src="'+e[t][s].image+'"></div><div class="content-card--title">'+e[t][s].title+"</div>"+(e[t][s].desc?'<div class="content-card--desc">'+e[t][s].desc+"</div>":"")+(e[t][s].link?'<div class="content-card--link"><span>See More</span></div>':"")+"</div>"+(e[t][s].link?"</a>":"</span>"))})),s+=i+"</div>"})),t(".content-grid--results").html(s).removeClass("is-loading"),this.state.paused=!1}};s.init(e)}}));